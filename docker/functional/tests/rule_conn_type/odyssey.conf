listen {
  host "*"
  port 6432

  tls "allow"
  tls_key_file "/tests/rule_conn_type/server.key"
  tls_cert_file "/tests/rule_conn_type/server.pem"
  tls_ca_file "/tests/rule_conn_type/root.pem"
  tls_protocols "tlsv1.2"
}

storage "pg" {
  type "remote"
  host "127.0.0.1"
  port 5432
}

storage "vdb-storage" {
  type "local"
}

database "vdb" {
  user "vuser" {
    authentication "none"
    storage "vdb-storage"
    pool "session"
  }
}

database "db1" {
  user "user1" host {
    authentication "none"
    storage "pg"
    pool "session"
  }
}

database "tsa_db" {
  user "user_ro" hostssl {
    authentication "none"
    storage "pg"
    pool "session"
  }

  user "user_rw" hostnossl {
    authentication "none"
    storage "pg"
    pool "session"
  }
}

daemonize yes

unix_socket_dir "/tmp"
unix_socket_mode "0644"

locks_dir "/tmp"

log_format "%p %t %l [%i %s] (%c) %m\n"
log_file "/var/log/odyssey.log"

log_to_stdout no
log_config yes
log_debug no
log_session yes
log_stats no
log_query no

coroutine_stack_size 24